Change Log
>>>>>>>>>>>>>>>>>>>>>>>>

3.7.17 - 2023-5-22
********

新增功能和重要更新
===================

1.新增 ``Clifford模拟器`` ，主要用于基础量子纠错场景以及高比特且稀疏的Clifford门集构成的量子线路模拟，具体接口可以参考 :ref:`Stabilizer` 。 

2.量子云虚拟机相关更新

    （1）为了适配了新版本的本源量子云平台做了相关改动，对每个用户的认证标识符做了签名加密处理，但接口使用方式与之前相同
    （2）完善相关的错误处理，现在出错和异常信息输出更加具体明确

3.新增Pauli算符与矩阵的转化接口，通过矩阵转换Pauli算符接口名为 ``matrix_decompose_hamiltonian`` ,示例如下：

    .. code-block:: python

        import pyqpanda as pq
        import numpy as np

        matrix = np.array([[2,1,4,2],[1,3,2,6],[4,2,2,1],[2,6,1,3]])
        hamiltonian = pq.matrix_decompose_hamiltonian(matrix)
        print(hamiltonian)

4.提供一种利用矩阵乘积态（MPS）的低秩表达近似分布振幅制备算法，可以通过一种较少的CNOT的门完成对分布振幅的表达，并且这种表达是一种近邻接形式，因此可以直接作用于芯片，由于双门个数的减少，也有利于增加分布制备的成功率。

    .. code-block:: python

        import pyqpanda as pq
        import numpy as np

        N = 6
        machine = pq.CPUQVM()
        machine.init_qvm()
        q = machine.qAlloc_many(N)
        input = np.random.rand(2**N)
        input = input/np.linalg.norm(input)
        print(input)
        cir_encode = pq.Encode()
        cir_encode.approx_mps(q,input)

        # 测保真度
        print(cir_encode.get_fidelity(input))

        #获取对应的线路
        cir=cir_encode.get_circuit()


    .. code-block:: python

        #input
        [0.16112594 0.16100983 0.1400971  0.17698809 0.00271532 0.03514281
        0.21320235 0.16615301 0.05702894 0.00801802 0.1383352  0.19258674
        0.17222723 0.04907042 0.08964018 0.18973404 0.19969125 0.04078985
        0.09852639 0.0812352  0.01124633 0.15024028 0.0052733  0.08204391
        0.13542787 0.0063939  0.01784828 0.20612599 0.00029431 0.11172891
        0.03021631 0.04188075 0.11371365 0.01309453 0.15079619 0.10912272
        0.10914789 0.09004797 0.14673464 0.01355957 0.14773146 0.06804273
        0.18411989 0.11896504 0.20181007 0.14760838 0.01292288 0.05372168
        0.16185868 0.0282684  0.20429462 0.15065767 0.00913953 0.05270058
        0.14767897 0.05914504 0.14426304 0.17902859 0.14117762 0.14085366
        0.16269993 0.11606257 0.18384488 0.08961622]

        #保真度
        0.9900438487247981

5.Pauli算符的构造函数现在提供可选参数，用于决定是否合并同类项，同时也可以显式调用手动合并函数

    .. code-block:: python

        import pyqpanda as pq
        import numpy as np

        #默认不合并同类项
        operator = pq.PauliOperator({"X0 Y2" : -0.044750,
                                    "Z0 Z1" : 0.189766,
                                    "Z1 Z0" : 0.270597,
                                    "Z3" : -0.242743})

        print(operator)

        #合并同类项
        operator = pq.PauliOperator({"X0 Y2" : -0.044750,
                                    "Z0 Z1" : 0.189766,
                                    "Z1 Z0" : 0.270597,
                                    "Z3" : -0.242743},True)

        print(operator)

        #手动合并
        operator.reduce_duplicates()

    输出结果如下：

    .. code-block:: python


        #默认不合并同类项
        {
            "X0 Y2" : -0.044750,
            "Z0 Z1" : 0.189766,
            "Z0 Z1" : 0.270597,
            "Z3" : -0.242743
        }

        #合并同类项
        {
            "X0 Y2" : -0.044750,
            "Z0 Z1" : 0.460363,
            "Z3" : -0.242743
        }

    上述可选合并默认参数的使用方式适用于以下Pauli算符的构造函数

    .. code-block:: python

        import pyqpanda as pq
        import numpy as np

        operator = pq.PauliOperator({"X0 X1" : -0.044750, "Z0 Z1" : 0.189766}, True)
        operator = pq.PauliOperator(np.array([0, 1, 1, 0]).reshape(2, 2), True)
        operator = pq.PauliOperator("X0 X1", 0.122, True)

其他更新
========

1.修复在某些情况下，GPU虚拟机无法在linux下运行的问题

2.修复pyqpanda画量子线路时，Barrier门会出现比特和图像不符的现象

3.在编译优化方面，解决了高深度量子线路编译时，偶尔出现的内存崩溃问题

4.修复部分振幅虚拟机，分解Toffoli门和CU门无法正确识别分解结果的问题，现在部分振幅虚拟机对全部的单双门和Toffoli门均有很好地支持

5.噪声虚拟机添加线程数量控制

6.解决密度矩阵噪声在算符类噪声施加比特参数的错误


3.7.16 - 2023-1-12
********

新增功能
========

1.新增 ``密度矩阵模拟器`` ，适用于小型量子系统下的密度矩阵模拟，同时提供约化密度矩阵，概率分布，哈密顿量期望以及噪声线路模拟等接口，具体可以参考 :ref:`密度矩阵模拟器` 。 

2.优化了泡利算符的构造方式，新增了通过矩阵来构造泡利算符的接口。

3.优化了泡利算符的构造方式，新增了形如 ``operator = 1.5 * x(0) + 0.6 * y(1) + 2.1 * z(2)`` 的更简洁的构造方式。

4.单振幅虚拟机添加获取对应振幅接口。

其他更新
========

1.修复在只有measure线路等情况下，输出latex信息显示和转换失败的问题。

2.更新变分组件，添加三角函数相关接口。

3.优化了获取矩阵接口，现在可以添加了量子比特可选参数，获取一个量子线路中指定比特对应的矩阵。

4.修复退相干噪声计算错误的问题。

5.修复某些情况下GPU模拟器运行错误问题。

6.修复ISWAP门默认参数未统一的问题。

7.删除Encode类中归一化函数，并修改为入参检测归一化。

éšæœºåŸºå‡†
==========================

ç®€ä»‹
--------------

éšæœºåŸºå‡†æµ‹è¯•ï¼ˆRandomized Benchmarkingï¼ŒRBï¼‰æ˜¯é‡å­è®¡ç®—ä¸­ä¸€ç§ç”¨äºé‡å­é—¨æ€§èƒ½è¯„ä¼°çš„å®éªŒæŠ€æœ¯ã€‚å®ƒç”¨äºæµ‹é‡é‡å­é—¨çš„é”™è¯¯ç‡ï¼Œæä¾›äº†å…³äºé‡å­è®¡ç®—ç³»ç»Ÿçš„å™ªå£°æ°´å¹³å’Œç¨³å®šæ€§çš„ä¿¡æ¯ã€‚RB æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ–¹æ³•ï¼Œç”¨äºè¯„ä¼°é‡å­è®¾å¤‡çš„å¯é æ€§å’Œé”™è¯¯ç‡ã€‚


ç®—æ³•æµç¨‹
--------------

åœ¨éšæœºåŸºå‡†æµ‹è¯•ä¸­ï¼Œä¸»è¦æ€æƒ³æ˜¯é€šè¿‡å¯¹éšæœºåºåˆ—çš„ä¸€ç³»åˆ—é‡å­é—¨æ“ä½œè¿›è¡Œæµ‹é‡ï¼Œæ¥è¯„ä¼°é‡å­é—¨çš„é”™è¯¯ç‡ã€‚è¿™äº›éšæœºåºåˆ—çš„ç‰¹ç‚¹æ˜¯å®ƒä»¬ä¼šè¶‹å‘äºäº’ç›¸æŠµæ¶ˆï¼Œä»è€Œå‡å°‘ç³»ç»Ÿå™ªå£°çš„å½±å“ã€‚é€šè¿‡æ¯”è¾ƒå®é™…æµ‹é‡ç»“æœå’Œç†è®ºé¢„æœŸï¼Œå¯ä»¥ä¼°è®¡å‡ºé‡å­é—¨çš„é”™è¯¯ç‡ã€‚

å®éªŒè¿‡ç¨‹å¦‚ä¸‹ï¼š

1. ç”Ÿæˆéšæœºåºåˆ—ï¼šç”Ÿæˆä¸€ç³»åˆ—éšæœºçš„é‡å­é—¨åºåˆ—ï¼Œè¿™äº›åºåˆ—æ¶µç›–äº†ä¸åŒçš„é‡å­é—¨æ“ä½œå’Œé¡ºåºã€‚

2. å®éªŒæ“ä½œï¼šåœ¨é‡å­è®¾å¤‡ä¸Šä¾æ¬¡æ‰§è¡Œç”Ÿæˆçš„éšæœºåºåˆ—ã€‚

3. æµ‹é‡ç»“æœï¼šå¯¹æ¯ä¸ªéšæœºåºåˆ—ï¼Œæµ‹é‡é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œå¹¶è®°å½•æµ‹é‡ç»“æœã€‚

1ï¼Œ2ï¼Œ3æ­¥çš„å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

.. admonition:: 1,2,3æ­¥çš„å…·ä½“æ“ä½œ
   :class: tip

    åœ¨Cliffordç¾¤ä¸­éšæœºéœ€æ±‚mä¸ªé—¨ï¼Œæ„æˆä¸€ä¸ªåºåˆ—ï¼›
    è®¡ç®—è¯¥åºåˆ—çš„ç­‰æ•ˆ :math:`U` æ“ä½œï¼Œè¯¥æ“ä½œçš„é€† :math:`\mathrm{U}^{-1}` ä¸€å®šä¹Ÿåœ¨Cliffordç¾¤ä¸­ï¼Œå°† :math:`\mathrm{U}^{-1}` æ·»åŠ åˆ°åºåˆ—ä¸­ä½œä¸ºç¬¬m+1ä¸ªå…ƒç´ ï¼Œæ„æˆä¸€ä¸ªå®Œæ•´çš„åºåˆ—;
    æµ‹é‡é‡å­æ¯”ç‰¹åœ¨è¯¥åºåˆ—æ“ä½œä¹‹åçš„0æ€ï¼ˆåˆæ€åœ¨0æ€ï¼‰ä¿çœŸåº¦ :math:`y_{mk}` ã€‚

4. åˆ†æï¼šé€šè¿‡æ¯”è¾ƒé¢„æœŸæµ‹é‡ç»“æœå’Œå®é™…æµ‹é‡ç»“æœï¼Œå¯ä»¥å¾—å‡ºé‡å­é—¨çš„é”™è¯¯ç‡ã€‚é€šå¸¸ä½¿ç”¨æŒ‡æ•°é€’å‡æ¨¡å‹æ¥åˆ†æé”™è¯¯ç‡ã€‚

5. é”™è¯¯ç‡ä¼°è®¡ï¼šé€šè¿‡åˆ†æè·å¾—çš„æ•°æ®ï¼Œå¯ä»¥ä¼°è®¡å‡ºä¸åŒé‡å­é—¨çš„å¹³å‡é”™è¯¯ç‡ã€‚



.. admonition:: 4,5æ­¥çš„å…·ä½“æ“ä½œ
   :class: tip


    è®¡ç®—åºåˆ—é•¿åº¦ä¸ºmæ—¶çš„å¹³å‡ä¿çœŸåº¦ :math:`y_m=\frac{1}{K} \sum_1^K y_{m k}` , å¾—åˆ°åºåˆ—å¹³å‡ä¿çœŸåº¦yå’Œåºåˆ—é•¿åº¦mçš„å…³ç³»ï¼Œå¹¶ç”¨å…¬å¼ä¸‹é¢æ‹Ÿåˆï¼š

    .. math::

        \begin{aligned}
        y=A * p^m+B
        \end{aligned}

    é—¨æ“ä½œå¹³å‡é”™è¯¯ç‡ :math:`r_c` ä¸æ‹Ÿåˆå‚æ•°ğ‘çš„å…³ç³»ï¼š

    .. math::

        \begin{aligned}
        r_c=(1-p) *\left(2^n-1\right) / 2^n
        \end{aligned}




éšç€Cliffordé—¨æ•°é‡çš„å¢åŠ ï¼Œé—¨åºåˆ—çš„å¹³å‡æˆåŠŸæ¦‚ç‡ä¼šä¸‹é™ï¼Œå› ä¸ºå½“é‡å¤åº”ç”¨åŒ…å«é”™è¯¯çš„é‡å­é—¨æ—¶ï¼Œæ•´ä¸ªé—¨åºåˆ—çš„é”™è¯¯æ¦‚ç‡ä¼šå•è°ƒå¢åŠ ,åœ¨ RB ä¸­ï¼Œé€šå¸¸å‡è®¾ä¸åŒCliffordçš„å™ªå£°è¶…ç®—å­ç›¸ç­‰ï¼Œåœ¨æ­¤å‡è®¾ä¸‹ï¼Œé—¨åºåˆ—çš„å¹³å‡æˆåŠŸæ¦‚ç‡å·²è¢«è¯æ˜éšCliffordé—¨çš„æ•°é‡å‘ˆæŒ‡æ•°è¡°å‡ã€‚

æ¥å£è¯´æ˜
--------------

1.å•é—¨éšæœºåŸºå‡†æµ‹è¯•ï¼š ``single_qubit_rb`` ã€‚

.. function:: single_qubit_rb(config: QCloudTaskConfig, qubit: int, clifford_range: List[int], num_circuits: int, interleaved_gates: List[QGate] = []) -> Dict[int,float]

    æ­¤å‡½æ•°ç”¨äºæ‰§è¡Œå•æ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†ï¼ˆSingle Qubit Randomized Benchmarkingï¼‰å®éªŒã€‚
    
    :param config: QCloudTaskConfig å¯¹è±¡ï¼Œè¡¨ç¤ºäº‘é‡å­ä»»åŠ¡çš„é…ç½®ã€‚
    :type config: QCloudTaskConfig
    :param qubit: å•æ¯”ç‰¹é‡å­æ¯”ç‰¹ç´¢å¼•ã€‚
    :type qubit: int
    :param clifford_range: åŒ…å« Clifford é—¨çš„åºåˆ—é•¿åº¦èŒƒå›´çš„åˆ—è¡¨ï¼Œç”¨äºæŒ‡å®šä¸åŒé•¿åº¦çš„ Clifford é—¨åºåˆ—ã€‚
    :type clifford_range: List[int]
    :param num_circuits: è¦æ‰§è¡Œçš„ç”µè·¯æ•°é‡ã€‚
    :type num_circuits: int
    :param interleaved_gates: åŒ…å«æ’å…¥åœ¨ Clifford é—¨åºåˆ—ä¸­çš„é¢å¤–é—¨çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºåˆ—è¡¨ã€‚
    :type interleaved_gates: List[QGate], optional
    :return: åŒ…å«å•æ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†å®éªŒç»“æœçš„å­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯ Clifford é—¨åºåˆ—é•¿åº¦ï¼Œå€¼æ˜¯è¯¯å·®æ¦‚ç‡ã€‚
    :rtype: Dict[int,float]
    :raises run_fail: æ‰§è¡Œå•æ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†å®éªŒå¤±è´¥ã€‚

2.åŒé—¨éšæœºåŸºå‡†æµ‹è¯•ï¼š ``double_qubit_rb`` ã€‚

.. function:: double_qubit_rb(config: QCloudTaskConfig, qubit0: int, qubit1: int, clifford_range: List[int], num_circuits: int, interleaved_gates: List[QGate] = []) -> Dict[int,float]

    æ­¤å‡½æ•°ç”¨äºæ‰§è¡ŒåŒæ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†ï¼ˆDouble Qubit Randomized Benchmarkingï¼‰å®éªŒã€‚
    
    :param config: QCloudTaskConfig å¯¹è±¡ï¼Œè¡¨ç¤ºäº‘é‡å­ä»»åŠ¡çš„é…ç½®ã€‚
    :type config: QCloudTaskConfig
    :param qubit0: åŒæ¯”ç‰¹ç¬¬ä¸€ä¸ªé‡å­æ¯”ç‰¹ç´¢å¼•ã€‚
    :type qubit0: int
    :param qubit1: åŒæ¯”ç‰¹ç¬¬äºŒä¸ªé‡å­æ¯”ç‰¹ç´¢å¼•ã€‚
    :type qubit1: int
    :param clifford_range: åŒ…å« Clifford é—¨çš„åºåˆ—é•¿åº¦èŒƒå›´çš„åˆ—è¡¨ï¼Œç”¨äºæŒ‡å®šä¸åŒé•¿åº¦çš„ Clifford é—¨åºåˆ—ã€‚
    :type clifford_range: List[int]
    :param num_circuits: è¦æ‰§è¡Œçš„ç”µè·¯æ•°é‡ã€‚
    :type num_circuits: int
    :param interleaved_gates: åŒ…å«æ’å…¥åœ¨ Clifford é—¨åºåˆ—ä¸­çš„é¢å¤–é—¨çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºåˆ—è¡¨ã€‚
    :type interleaved_gates: List[QGate], optional
    :return: åŒ…å«åŒæ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†å®éªŒç»“æœçš„å­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯ Clifford é—¨åºåˆ—é•¿åº¦ï¼Œå€¼æ˜¯è¯¯å·®æ¦‚ç‡ã€‚
    :rtype: Dict[int,float]
    :raises run_fail: æ‰§è¡ŒåŒæ¯”ç‰¹éšæœºç”µè·¯åŸºå‡†å®éªŒå¤±è´¥ã€‚

å®ä¾‹
--------------

.. code-block:: python

    from pyqpanda import *

    if __name__=="__main__":  

        # è®¾ç½®éšæœºçº¿è·¯ä¸­cliffordé—¨é›†æ•°é‡
        range = [ 5,10,15 ]

        #è®¾ç½®ç”¨æˆ·çœŸå®apikeyï¼Œéœ€è¦ç¡®ä¿æœ‰è¶³å¤Ÿç®—åŠ›èµ„æº
        online_api_key = "XXX"

        #é…ç½®é‡å­è®¡ç®—ä»»åŠ¡å‚æ•°
        config = QCloudTaskConfig()
        config.cloud_token = online_api_key
        config.chip_id = origin_72
        config.open_amend = False
        config.open_mapping = False
        config.open_optimization = False
        config.shots = 1000

        #æµ‹é‡å•æ¯”ç‰¹éšæœºåŸºå‡†
        single_rb_result = single_qubit_rb(config, 0, range, 20)

        #åŒæ ·å¯ä»¥æµ‹é‡ä¸¤æ¯”ç‰¹éšæœºåŸºå‡†
        double_rb_result = double_qubit_rb(config, 0, 1, range, 20)
        
        #å¯¹åº”çš„æ•°å€¼éšè®¾å¤‡å™ªå£°å½±å“ï¼Œå™ªå£°æ•°å€¼è¶Šå¤§ï¼Œæ‰€å¾—ç»“æœè¶Šå°ï¼Œä¸”éšcliffordé—¨é›†æ•°é‡å¢å¤šï¼Œç»“æœæ•°å€¼è¶Šå°ã€‚
        print(single_rb_result)
        print(double_rb_result)

        #è¿è¡Œç»“æœï¼š
        # {5: 0.464, 10: 0.4535, 15: 0.437}
        # {5: 0.1675, 10: 0.20750000000000002, 15: 0.198}

å‚è€ƒæ–‡çŒ®
----

::

    [1] Easwar Magesan, J. M. Gambetta, and Joseph Emerson, Robust randomized benchmarking of quantum processes, https://arxiv.org/abs/1009.3639.
    [2] Easwar Magesan, Jay M. Gambetta, and Joseph Emerson, Characterizing Quantum Gates via Randomized Benchmarking, https://arxiv.org/abs/1109.6887.